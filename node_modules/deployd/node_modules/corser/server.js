var http, corser, corserRequestListener;

http = require("http");
corser = require("./lib/corser.js");

// Create Corser request listener.
corserRequestListener = corser.create({
    requestHeaders: corser.simpleRequestHeaders.concat(["x-corser"])
});

http.createServer(function (req, res) {
    // Route req and res through the request listener.
    corserRequestListener(req, res, function () {
        if (req.method === "OPTIONS") {
            // End CORS preflight request.
            res.writeHead(204);
            res.end();
        } else {
            // Your code goes here.
            res.writeHead(200);
            res.end("Nice weather today, huh?");
        }
    });
}).listen(1337);